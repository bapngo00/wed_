<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Thêm dữ liệu vào MockAPI</title>
</head>

<body>
    <h2>Thêm Users vào MockAPI</h2>
    <button id="uploadBtn">Tải dữ liệu lên</button>
    <pre id="log"></pre>

    <script>
        const data = {
            "Ngọc Thu": [
                { from: "Bạn", text: "Chào Thu!" },
                { from: "Ngọc Thu", text: "Chào bạn ^^" },
                { from: "Bạn", text: "Hôm nay thế nào rồi?" }
            ],
            "Anh Minh": [
                { from: "Bạn", text: "Minh ơi, mai đi chơi không?" },
                { from: "Anh Minh", text: "Tùy xem có mưa không 😅" }
            ],
            "Quyền Nguyễn": [
                { from: "Bạn", text: "Tối qua làm xong bài chưa?" },
                { from: "Quyền Nguyễn", text: "Xong rồi, gửi bạn luôn nè!" }
            ]
        };

        document.getElementById("uploadBtn").addEventListener("click", () => {
            const log = document.getElementById("log");
            log.textContent = "Đang gửi dữ liệu...\n";

            Object.entries(data).forEach(([name, messages]) => {
                fetch('https://6876662f814c0dfa653bf2e8.mockapi.io/users', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name,
                        messages
                    })
                })
                    .then(res => res.json())
                    .then(result => {
                        log.textContent += `✅ Đã thêm: ${result.name} (id: ${result.id})\n`;
                    })
                    .catch(err => {
                        log.textContent += `❌ Lỗi với ${name}: ${err.message}\n`;
                    });
            });
        });
    </script>
</body>

</html>